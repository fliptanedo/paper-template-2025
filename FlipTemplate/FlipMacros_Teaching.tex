%!TEX root = ../sample_lecturenotes.tex
%% MACROS FOR `theorem' ENVIRONMENTS IN LEC. NOTES
%% USES: FlipPreamble.tex 

%%%%%%%%%%%%%%%%%%%%%%%%%%
%% SUB-APPENDICES       %%
%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage{appendix}   % for sub-appendices
%% see https://tex.stackexchange.com/a/120723/8094
%% ... and discussion therein


%%%%%%%%%%%%%%%%%%%%%%%%%%
%%                      %%
%% THEOREM ENVIRONMENTS %%
%% -------------------- %%
%% Provides:            %%
%%  theorem             %%
%%  exercise            %%
%%  bigidea             %%
%%                      %%
%%%%%%%%%%%%%%%%%%%%%%%%%%

%% thm title discussion
%% titles: tex.stackexchange.com/a/185168/8094
%% style: tex.stackexchange.com/a/38264/8094
%% Note: attempts to use newtcbtheorem failed
%%  no longer uses \label
%%  optional descriptions are clunky
%% Note: descriptions render in different font
%%  if you compile with pdflatex vs xelatex
%%  I can't figure out why, but leave it with pdflatex
%%  for now for maximum compatibility.

% \DeclareRobustCommand{\descriptionfira}{\fontspec{Fira Sans}}

%% DEFINE DIFFERENT STYLES (DIFF COLOR TITLES)
\newtheoremstyle{flip}% <name>
{0pt}% Space above, overwritten by tcolorbox
{0pt}% Space below, overwritten by tcolorbox
{\setlength{\parskip}{.5\baselineskip}}% <Body font>
{}% <Indent amount>
{\bfseries\sffamily\color{black}}% <Theorem head font>
{.\;}% <Punctuation after theorem head>
{.5em}% <Space after theorem headi> overwritten by tcolorbox
{}% <Theorem head spec (can be left empty, meaning `normal')>

\newtheoremstyle{flipred}% <name>
{0pt}% Space above, overwritten by tcolorbox
{0pt}% Space below, overwritten by tcolorbox
{\setlength{\parskip}{.5\baselineskip}}% <Body font>
{}% <Indent amount>
{\bfseries\sffamily\color{red!50!black}}% <Theorem head font>
{.\;}% <Punctuation after theorem head>
{.5em}% <Space after theorem headi> overwritten by tcolorbox
{}% <Theorem head spec (can be left empty, meaning `normal')>

\newtheoremstyle{flipgreen}% <name>
{0pt}% Space above, overwritten by tcolorbox
{0pt}% Space below, overwritten by tcolorbox
{\setlength{\parskip}{.5\baselineskip}}% <Body font>
{}% <Indent amount>
{\bfseries\sffamily\color{green!50!black}}% <Theorem head font>
{.\;}% <Punctuation after theorem head>
{.5em}% <Space after theorem headi> overwritten by tcolorbox
{}% <Theorem head spec (can be left empty, meaning `normal')>

\newtheoremstyle{flipblue}% <name>
{0pt}% Space above, overwritten by tcolorbox
{0pt}% Space below, overwritten by tcolorbox
{\setlength{\parskip}{.5\baselineskip}}% <Body font>
{}% <Indent amount>
{\bfseries\sffamily\color{blue!50!black}}% <Theorem head font>
{\mdseries\\}% <Punctuation after theorem head>
{.5em}% <Space after theorem headi> overwritten by tcolorbox
{\thmname{#1}\thmnumber{ #2}\thmnote{{\sffamily\firabook\quad #3}}}% <Theorem head spec (can be left empty, meaning `normal')>
% {}% <Theorem head spec (can be left empty, meaning `normal')>

%% OTHER OPTIONS
%% But renders differently in xelatex vs pdflatex
% {\thmname{#1}\thmnumber{ #2}\thmnote{{\firabook\quad #3}}}% 


\theoremstyle{flip}
\newtheorem{theorem}{Theorem}[section]

\theoremstyle{flipred}
\newtheorem{exercise}{Exercise}[section]

\theoremstyle{flipgreen}
\newtheorem{example}{Example}[section]

\theoremstyle{flipblue}
\newtheorem{bigidea}{Key Idea}[section]
    \newcommand{\bigidearef}{Key~Idea}
    \newcommand{\bigidearefs}{Key~Ideas}



% Change size of font in theorem environments
\AtBeginEnvironment{example}{\footnotesize}
\AtBeginEnvironment{exercise}{\footnotesize}
\AtBeginEnvironment{theorem}{\small}
\AtBeginEnvironment{bigidea}{\small}


% TCOLORBOX settings
% https://tex.stackexchange.com/a/633497/8094
\tcolorboxenvironment{theorem}{
    enhanced, % Skin Family `enhanced'
    colback=black!5,
    % blanker,
    frame hidden,  % no frame
    sharp corners,
    boxrule=0pt, % no gap
    % interior hidden, % no interior color
    breakable, % allows box to flow across pages
    borderline west={2pt}{0pt}{gray},
    top=10pt,
    bottom=10pt,
    before skip=20pt,
    after skip=20pt,
    separator sign none,
    separator sign= {\;}
    }

\tcolorboxenvironment{exercise}{
    enhanced, % Skin Family `enhanced'
    colback=red!5,
    borderline west={2pt}{0pt}{red!50!black},
    % blanker,
    frame hidden,  % no frame
    sharp corners,
    boxrule=0pt, % no gap
    % interior hidden, % no interior color
    breakable, % allows box to flow across pages
    top=10pt,
    bottom=10pt,
    before skip=20pt,
    after skip=20pt,
    separator sign none,
    separator sign= {\;}
    }

\tcolorboxenvironment{example}{
    enhanced, % Skin Family `enhanced'
    colback=green!5,
    borderline west={2pt}{0pt}{green!50!black},
    % blanker,
    frame hidden,  % no frame
    sharp corners,
    boxrule=0pt, % no gap
    % interior hidden, % no interior color
    breakable, % allows box to flow across pages
    top=10pt,
    bottom=10pt,
    before skip=20pt,
    after skip=20pt,
    separator sign none,
    separator sign= {\;}
    }


\tcolorboxenvironment{bigidea}{
    enhanced, % Skin Family `enhanced'
    colback=blue!5,
    borderline west={2pt}{0pt}{blue!50!black},
    % blanker,
    frame hidden,  % no frame
    sharp corners,
    boxrule=0pt, % no gap
    % interior hidden, % no interior color
    breakable, % allows box to flow across pages
    top=10pt,
    bottom=10pt,
    before skip=20pt,
    after skip=20pt,
    separator sign none,
    separator sign= {\;}
    }

